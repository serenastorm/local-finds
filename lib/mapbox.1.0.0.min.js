mapboxgl.accessToken="pk.eyJ1IjoiYnlhbmltYSIsImEiOiJjbGt3eTQxMXUwNXlrM3FueTVkYTUyZmwwIn0.ZUthdqyjpaM2LxlZtUfSaw";var active_popup,active_marker,active_item,map=new mapboxgl.Map({container:"map",style:"mapbox://styles/byanima/clkx0n1rk005z01qsdmyd9v0l",center:[-3.1910909,55.9519327],zoom:12.5});map.addControl(new mapboxgl.NavigationControl),$(".location").each((function(e){var t=this,a=$(this),o=a.find(".lat").text(),i=a.find(".lon").text(),n=this.popup,c=document.createElement("div"),r=a.find(".location-category").text();c.classList.add("marker"),c.classList.add("marker-".concat(r.toLowerCase()));var s=a.find(".pre-popup")[0].outerHTML;n=new mapboxgl.Popup({offset:25,closeButton:!1,maxWidth:"auto"}).setHTML(s);this.marker;new mapboxgl.Marker(c).setLngLat([i,o]).setPopup(n).addTo(map);var m=function(e){null!=active_marker&&(active_item.classList.remove("active"),active_popup.remove()),n.addTo(map),active_popup=n,active_marker=c,(active_item=t).classList.add("active"),map.flyTo({center:[i,o],essential:!0,zoom:map.getZoom()}),e&&active_item.scrollIntoViewIfNeeded({behavior:"smooth",block:"nearest",inline:"start"})};c.addEventListener("click",(function(){m(!0)})),this.addEventListener("click",(function(){m()}))}));