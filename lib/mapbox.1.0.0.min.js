mapboxgl.accessToken="pk.eyJ1IjoiYnlhbmltYSIsImEiOiJjbGt3eTQxMXUwNXlrM3FueTVkYTUyZmwwIn0.ZUthdqyjpaM2LxlZtUfSaw";var active_popup,active_marker,active_item,map=new mapboxgl.Map({container:"map",style:"mapbox://styles/byanima/clkx0n1rk005z01qsdmyd9v0l",center:[-3.1910909,55.9519327],zoom:12.5});map.addControl(new mapboxgl.NavigationControl);var markers=[],renderMap=function(){markers.forEach((function(e){return e.remove()})),markers=[],$(".location").each((function(e){var t=this,a=$(this),i=a.find(".lat").text(),r=a.find(".lon").text(),o=this.popup,s=document.createElement("div"),c=a.find(".location-category").text();s.classList.add("marker"),s.classList.add("marker-".concat(c.toLowerCase()));var n=a.find(".pre-popup");o=new mapboxgl.Popup({offset:25,closeButton:!1,maxWidth:"auto"}).setHTML(n[0].outerHTML);var l=this.marker;l=new mapboxgl.Marker(s).setLngLat([r,i]).setPopup(o).addTo(map),markers.push(l),s.addEventListener("click",(function(){null!=active_marker&&(active_item.classList.remove("active"),active_marker.classList.remove("show"),active_popup.remove()),o.addTo(map),active_popup=o,s.classList.add("show"),(active_item=t).classList.add("active"),active_item.scrollIntoViewIfNeeded({behavior:"smooth",block:"nearest",inline:"start"}),active_marker=s,map.flyTo({center:[r,i],essential:!0})})),this.addEventListener("click",(function(){null!=active_marker&&(active_item.classList.remove("active"),active_marker.classList.remove("show"),active_popup.remove()),o.addTo(map),active_popup=o,s.classList.add("show"),(active_item=t).classList.add("active"),active_item.scrollIntoViewIfNeeded({behavior:"smooth",block:"nearest",inline:"start"}),active_marker=s,map.flyTo({center:[r,i],essential:!0}),map.flyTo({center:[r,i],essential:!0})})),o.on("close",(function(){active_item.classList.remove("active"),active_marker=void 0}))}))};renderMap();var listWrapper=document.getElementById("list-wrapper"),observer=new MutationObserver((function(e){for(var t=0,a=e;t<a.length;t++){"childList"===a[t].type&&renderMap()}}));observer.observe(listWrapper,{childList:!0});