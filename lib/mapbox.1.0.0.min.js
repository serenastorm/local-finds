mapboxgl.accessToken="pk.eyJ1IjoiYnlhbmltYSIsImEiOiJjbGt3eTQxMXUwNXlrM3FueTVkYTUyZmwwIn0.ZUthdqyjpaM2LxlZtUfSaw";var active_popup,active_marker,active_item,map=new mapboxgl.Map({container:"map",style:"mapbox://styles/byanima/clkx0n1rk005z01qsdmyd9v0l",center:[-3.1910909,55.9519327],zoom:12.5});map.addControl(new mapboxgl.NavigationControl);var markers=[],renderMap=function(){markers.forEach((function(e){return e.remove()})),markers=[],$(".location").each((function(e){var a=this,t=$(this),r=t.find(".lat").text(),i=t.find(".lon").text(),o=this.popup,s=document.createElement("div"),n=t.find(".location-category").text();s.classList.add("marker"),s.classList.add("marker-".concat(n.toLowerCase()));var c=t.find(".pre-popup");o=new mapboxgl.Popup({offset:25,closeButton:!1,maxWidth:"auto"}).setHTML(c[0].outerHTML);var m=this.marker;m=new mapboxgl.Marker(s).setLngLat([i,r]).setPopup(o).addTo(map),markers.push(m),s.addEventListener("click",(function(){o.addTo(map),null!=active_marker&&(active_item.classList.remove("active"),o.remove()),(active_item=a).classList.add("active"),active_item.scrollIntoViewIfNeeded({behavior:"smooth",block:"nearest",inline:"start"}),active_marker=s,map.flyTo({center:[i,r],essential:!0})})),this.addEventListener("click",(function(){map.flyTo({center:[i,r],essential:!0}),null!=active_marker&&(active_item.classList.remove("active"),active_marker.classList.remove("show"),active_popup.remove()),o.addTo(map),s.classList.add("show"),active_marker=s,active_popup=o,(active_item=a).classList.add("active")}))}))};renderMap();var listWrapper=document.getElementById("list-wrapper"),observer=new MutationObserver((function(e){for(var a=0,t=e;a<t.length;a++){"childList"===t[a].type&&renderMap()}}));observer.observe(listWrapper,{childList:!0});